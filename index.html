<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi2 Sentinel | Analytics & Education</title>
    
    <!-- STYLES & FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pi: {
                            bg: '#020204',
                            card: '#0b0b12',
                            primary: '#00f2ea', // Cyan Neon
                            accent: '#7000ff',  // Deep Violet
                            success: '#0aff99',
                            danger: '#ff2a6d',
                            text: '#e2e8f0',
                            dim: '#545975'
                        }
                    },
                    fontFamily: { mono: ['"JetBrains Mono"', 'monospace'], sans: ['"Inter"', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        body { background-color: #020204; overflow-x: hidden; }
        .glass {
            background: rgba(11, 11, 18, 0.65);
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }
        .highlight { animation: flash 1s; }
        @keyframes flash { 0% { color: #fff; text-shadow: 0 0 10px white; } 100% { color: inherit; } }
        
        .pulse-ring {
            box-shadow: 0 0 0 0 rgba(0, 242, 234, 0.7);
            animation: ring 2s infinite;
        }
        @keyframes ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 242, 234, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(0, 242, 234, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 242, 234, 0); }
        }
    </style>
</head>
<body class="text-pi-text font-sans antialiased relative selection:bg-pi-primary selection:text-black">

    <!-- BG EFFECTS -->
    <div class="fixed top-0 left-0 w-full h-1 bg-gradient-to-r from-pi-accent via-pi-primary to-pi-accent z-50 shadow-[0_0_20px_#00f2ea]"></div>
    <canvas id="particles" class="fixed top-0 left-0 w-full h-full pointer-events-none opacity-20 z-0"></canvas>

    <div class="relative z-10 max-w-7xl mx-auto px-4 py-8 min-h-screen flex flex-col">

        <!-- NAV -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            <div class="flex items-center gap-4">
                <div class="relative">
                    <div class="w-12 h-12 rounded bg-white/5 flex items-center justify-center border border-white/10 text-2xl">œÄ¬≤</div>
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-pi-success rounded-full animate-pulse"></div>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tighter text-white">SENTINEL <span class="text-pi-primary">PRO</span></h1>
                    <p class="text-[10px] text-pi-dim font-mono uppercase tracking-widest">Universal Settlement Layer Analytics</p>
                </div>
            </div>
            
            <div class="flex gap-3">
                <button onclick="downloadCSV()" id="btn_export" class="hidden text-xs font-bold font-mono bg-white/5 hover:bg-white/10 px-4 py-2 rounded border border-white/10 transition flex items-center gap-2">
                    <i class="fas fa-download"></i> EXPORT DATA
                </button>
                <button onclick="toggleLang()" class="text-xs font-bold font-mono border border-pi-primary/30 text-pi-primary px-4 py-2 rounded hover:bg-pi-primary/10 transition" id="btn_lang">EN / RU</button>
            </div>
        </header>

        <!-- DASHBOARD GRID -->
        <main class="grid grid-cols-1 lg:grid-cols-12 gap-8 flex-grow">
            
            <!-- CONTROLS & EDUCATION -->
            <aside class="lg:col-span-4 flex flex-col gap-6">
                
                <!-- WALLET CONNECT -->
                <div class="glass rounded-none border-l-4 border-pi-primary p-6 relative group">
                    <div class="absolute top-2 right-2 text-pi-dim/20 text-4xl font-black z-0 pointer-events-none">01</div>
                    <h2 class="text-xs font-bold text-white mb-6 tracking-widest uppercase relative z-10 flex items-center gap-2">
                        <i class="fas fa-wifi text-pi-primary"></i> <span id="t_uplink">UPLINK CONFIG</span>
                    </h2>

                    <!-- Config View -->
                    <div id="setupForm" class="space-y-4 relative z-10">
                         <div class="p-3 bg-pi-danger/10 border border-pi-danger/20 rounded text-[10px] leading-relaxed text-red-200">
                            <i class="fas fa-exclamation-circle mr-1"></i> <span id="t_warn">Security: Use TESTNET (Burner) wallets only.</span>
                        </div>
                        <input type="text" id="inp_addr" class="w-full bg-black/40 border-b border-white/10 p-3 text-xs font-mono text-pi-primary focus:border-pi-primary focus:outline-none transition" placeholder="set1...">
                        <input type="password" id="inp_pk" class="w-full bg-black/40 border-b border-white/10 p-3 text-xs font-mono text-pi-primary focus:border-pi-primary focus:outline-none transition" placeholder="0x...">
                        
                        <button onclick="saveConfig()" id="btn_connect" class="w-full mt-2 bg-white/5 hover:bg-pi-primary hover:text-black border border-pi-primary/40 text-pi-primary font-bold py-3 uppercase text-xs tracking-wider transition-all duration-300">
                            Initialize Link
                        </button>
                    </div>

                    <!-- Active View -->
                    <div id="connectedView" class="hidden relative z-10 text-center py-2">
                        <div class="text-xs text-pi-dim uppercase mb-1">Target Identity</div>
                        <div class="font-mono text-pi-success bg-pi-success/5 p-2 rounded mb-4 break-all text-[10px]" id="display_addr">...</div>
                        <button onclick="disconnect()" class="text-[10px] text-pi-danger border-b border-pi-danger hover:text-white pb-0.5">TERMINATE CONNECTION</button>
                    </div>
                </div>

                <!-- DYNAMIC EDUCATION (AI INSIGHTS) -->
                <div class="glass p-6 flex-grow flex flex-col relative border-t-4 border-pi-accent">
                     <div class="absolute top-2 right-2 text-pi-dim/20 text-4xl font-black z-0 pointer-events-none">02</div>
                     <h3 class="text-xs font-bold text-white mb-4 tracking-widest uppercase flex items-center gap-2">
                        <i class="fas fa-brain text-pi-accent"></i> <span id="t_insight">LIVE INSIGHTS</span>
                     </h3>

                     <div class="bg-black/30 rounded p-4 border border-white/5 mb-4 min-h-[100px] flex items-center justify-center text-center">
                         <p id="insight_box" class="text-xs text-pi-dim italic leading-relaxed">
                            Start the benchmark to see real-time analysis of the network behavior...
                         </p>
                     </div>

                     <!-- Legend -->
                     <div class="mt-auto space-y-2">
                         <div class="flex items-center gap-2 text-[10px] text-gray-500">
                             <span class="w-2 h-2 rounded-full bg-pi-success"></span> <span id="l_fast">FastSet Active (<1s)</span>
                         </div>
                         <div class="flex items-center gap-2 text-[10px] text-gray-500">
                             <span class="w-2 h-2 rounded-full bg-yellow-500"></span> <span id="l_norm">Normal Load (1-3s)</span>
                         </div>
                     </div>
                </div>

            </aside>

            <!-- ANALYTICS DASHBOARD -->
            <section class="lg:col-span-8 flex flex-col gap-6">
                
                <!-- KPIS -->
                <div class="grid grid-cols-4 gap-4">
                    <div class="glass p-4 border-t-2 border-white/10 text-center">
                        <p class="text-[10px] text-pi-dim uppercase tracking-widest mb-1">Status</p>
                        <p id="val_status" class="text-lg font-bold text-gray-500 font-mono">IDLE</p>
                    </div>
                    <div class="glass p-4 border-t-2 border-pi-primary text-center">
                        <p class="text-[10px] text-pi-dim uppercase tracking-widest mb-1">Latency</p>
                        <div class="flex items-baseline justify-center gap-1">
                            <span id="val_lat" class="text-2xl font-bold text-white font-mono">0</span>
                            <span class="text-xs text-pi-primary">ms</span>
                        </div>
                    </div>
                    <div class="glass p-4 border-t-2 border-pi-accent text-center">
                        <p class="text-[10px] text-pi-dim uppercase tracking-widest mb-1">Traffic Sim</p>
                        <p id="val_amount" class="text-lg font-bold text-pi-accent font-mono">0.00</p>
                    </div>
                    <div class="glass p-4 border-t-2 border-pi-success text-center">
                        <p class="text-[10px] text-pi-dim uppercase tracking-widest mb-1">Success</p>
                        <p id="val_rate" class="text-lg font-bold text-pi-success font-mono">0%</p>
                    </div>
                </div>

                <!-- MAIN VISUALIZATION -->
                <div class="glass p-1 rounded min-h-[300px] relative border border-white/5 flex flex-col">
                    <div class="absolute top-4 right-5 flex gap-2">
                         <div id="proxy_ind" class="hidden px-2 py-0.5 rounded text-[10px] font-mono border bg-black/50 text-gray-400 border-gray-700">PROXY: A</div>
                    </div>
                    <canvas id="mainChart" class="flex-grow"></canvas>
                </div>

                <!-- ACTIONS & LOGS -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-56">
                    
                    <!-- TERMINAL -->
                    <div class="md:col-span-2 glass bg-[#050508] p-4 font-mono text-[10px] overflow-y-auto border border-white/10 shadow-inner" id="console">
                        <div class="text-pi-primary mb-2">> Loading Sentinel v8.0 Core...</div>
                        <div class="text-pi-dim">> System ready. Random Payload Generator armed.</div>
                        <div class="text-pi-dim">> Waiting for Uplink...</div>
                    </div>

                    <!-- CONTROL -->
                    <div class="glass p-5 flex flex-col justify-center gap-4 relative">
                         <div class="absolute top-2 right-2 text-pi-dim/20 text-4xl font-black z-0 pointer-events-none">03</div>
                         
                         <button id="btn_start" onclick="startTest()" disabled class="z-10 w-full bg-gradient-to-r from-pi-primary to-pi-accent hover:contrast-125 disabled:grayscale text-black font-black py-4 rounded-sm text-sm shadow-[0_0_20px_rgba(0,242,234,0.3)] transition-all">
                            START TEST
                        </button>
                        
                        <div class="z-10 text-center">
                             <p class="text-[10px] text-pi-dim mb-2">Simulated Traffic: 20 TXs</p>
                             <button onclick="stopTest()" class="text-[10px] text-red-500 hover:text-red-400 border border-red-900/50 bg-red-900/10 px-4 py-1 rounded">ABORT SEQUENCE</button>
                        </div>
                    </div>
                </div>

            </section>
        </main>
    </div>

    <script>
        // --- ‚öôÔ∏è ENGINE CONFIG ---
        const API_URL = "https://api.wallet.fastset.xyz/api/transferToken";
        // –ú–∞—Å—Å–∏–≤ –ø—Ä–æ–∫—Å–∏. –ï—Å–ª–∏ –æ–¥–∏–Ω –±–∞–Ω–∏—Ç, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è.
        const PROXIES = [
            (url) => `https://corsproxy.io/?${encodeURIComponent(url)}`,
            (url) => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`
        ];
        
        const TOKEN_ID = "0xfa575e7000000000000000000000000000000000000000000000000000000000";

        // --- STATE ---
        let lang = 'en';
        let isRunning = false;
        let chart;
        let stats = { ok: 0, fail: 0, history: [] };
        let wallet = { a: '', k: '' };

        // --- TEXT DATA ---
        const TX = {
            en: {
                h1: "UPLINK CONFIG", bn_c: "INITIALIZE LINK", warn: "Security: Use TESTNET wallets only. Keys stored locally.",
                h_insight: "LIVE INSIGHTS", st_idle: "IDLE", st_run: "RUNNING",
                l_fast: "FastSet (<1s)", l_norm: "Normal (1-3s)",
                
                // Educational Insights based on speed
                msg_fast: "‚ö° <b>Impressive!</b> The network achieved finality in under 800ms. This confirms the FastSet consensus is operating optimally, outpacing traditional block times.",
                msg_mid: "‚úÖ <b>Stable.</b> Transactions are processing normally. Variance likely due to geographical distance to the RPC node.",
                msg_slow: "üê¢ <b>Latency Detected.</b> Slow response (>2s) is likely due to the public <b>CORS Proxy</b> throttling our connection, NOT the Pi2 network itself.",
                msg_err: "üí• <b>Network Block.</b> The proxy tunnel was rate-limited. Auto-rotating to a new gateway..."
            },
            ru: {
                h1: "–ù–ê–°–¢–†–û–ô–ö–ê", bn_c: "–ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø", warn: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ—à–µ–ª—å–∫–∏. –ö–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.",
                h_insight: "–ñ–ò–í–û–ô –ê–ù–ê–õ–ò–ó", st_idle: "–û–ñ–ò–î–ê–ù–ò–ï", st_run: "–†–ê–ë–û–¢–ê–ï–¢",
                l_fast: "FastSet (<1c)", l_norm: "–ù–æ—Ä–º–∞ (1-3c)",

                msg_fast: "‚ö° <b>–í–ø–µ—á–∞—Ç–ª—è–µ—Ç!</b> –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–µ 800–º—Å. FastSet —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Å–æ–∑–¥–∞—é—Ç—Å—è –±–ª–æ–∫–∏ –≤ –≠—Ñ–∏—Ä–∏—É–º–µ.",
                msg_mid: "‚úÖ <b>–°—Ç–∞–±–∏–ª—å–Ω–æ.</b> –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —à—Ç–∞—Ç–Ω–æ. –ó–∞–¥–µ—Ä–∂–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å —É–¥–∞–ª–µ–Ω–Ω–æ—Å—Ç—å—é RPC —É–∑–ª–∞.",
                msg_slow: "üê¢ <b>–ó–∞–¥–µ—Ä–∂–∫–∞.</b> –í—ã—Å–æ–∫–∏–π –ø–∏–Ω–≥ (>2—Å), —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã–∑–≤–∞–Ω –Ω–∞—à–∏–º –ø—É–±–ª–∏—á–Ω—ã–º <b>Proxy-—Ç—É–Ω–Ω–µ–ª–µ–º</b>, –∞ –Ω–µ —Å–µ—Ç—å—é Pi2.",
                msg_err: "üí• <b>–°–±–æ–π —à–ª—é–∑–∞.</b> –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª IP. –ú–µ–Ω—è–µ–º –º–∞—Ä—à—Ä—É—Ç..."
            }
        };

        // --- INIT ---
        window.onload = () => {
            initParticles();
            initChart();
            if(localStorage.getItem('pi2_a')) {
                wallet.a = localStorage.getItem('pi2_a');
                wallet.k = localStorage.getItem('pi2_k');
                toggleUI(true);
            }
        };

        function toggleLang() {
            lang = lang === 'en' ? 'ru' : 'en';
            document.getElementById('btn_lang').innerText = lang.toUpperCase() + ' / ' + (lang==='en'?'RU':'EN');
            updateUIStrings();
        }

        function updateUIStrings() {
            document.getElementById('t_uplink').innerText = TX[lang].h1;
            document.getElementById('btn_connect').innerText = TX[lang].bn_c;
            document.getElementById('t_warn').innerText = TX[lang].warn;
            document.getElementById('t_insight').innerText = TX[lang].h_insight;
            document.getElementById('l_fast').innerText = TX[lang].l_fast;
            document.getElementById('l_norm').innerText = TX[lang].l_norm;
        }

        function saveConfig() {
            const a = document.getElementById('inp_addr').value.trim();
            const k = document.getElementById('inp_pk').value.trim();
            if(!a.startsWith('set1') || !k.startsWith('0x')) return alert("Format Error: Addr=set1..., Key=0x...");
            localStorage.setItem('pi2_a', a); localStorage.setItem('pi2_k', k);
            wallet = { a, k };
            toggleUI(true);
        }

        function disconnect() { localStorage.clear(); wallet={a:'',k:''}; toggleUI(false); }

        function toggleUI(active) {
            const form = document.getElementById('setupForm');
            const view = document.getElementById('connectedView');
            const btn = document.getElementById('btn_start');
            
            if(active) {
                form.classList.add('hidden'); view.classList.remove('hidden'); btn.disabled = false;
                document.getElementById('display_addr').innerText = wallet.a;
            } else {
                form.classList.remove('hidden'); view.classList.add('hidden'); btn.disabled = true;
            }
        }

        // --- CORE: RANDOMIZED BENCHMARK ---
        async function startTest() {
            if(isRunning) return;
            isRunning = true;
            document.getElementById('btn_export').classList.add('hidden');
            
            stats = { ok: 0, fail: 0, history: [] };
            chart.data.labels = []; chart.data.datasets[0].data = []; chart.update();
            updateInsight(TX[lang].st_run + "...", 'dim');
            updateStatusDOM(true);

            const TX_COUNT = 20;
            let proxyIndex = 0; // –î–ª—è —Ä–æ—Ç–∞—Ü–∏–∏

            for(let i=1; i<=TX_COUNT; i++) {
                if(!isRunning) break;

                // 1. RANDOM AMOUNT (Feature request)
                // –û—Ç 0.1 –¥–æ 50.0 –º–æ–Ω–µ—Ç
                const amount = (Math.random() * (50 - 0.1) + 0.1).toFixed(4);
                
                // 2. PROXY SELECTOR
                const getGateway = PROXIES[proxyIndex % PROXIES.length];
                const activeUrl = getGateway(API_URL);
                document.getElementById('proxy_ind').innerText = `GW: ${proxyIndex % PROXIES.length === 0 ? 'A' : 'B'}`;

                log(`Sending <b>${amount}</b> Pi2... (TX #${i})`, 'dim');
                document.getElementById('val_amount').innerText = amount;
                
                const startT = Date.now();

                try {
                    const resp = await fetch(activeUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            sender: wallet.a, recipient: wallet.a, 
                            amount: amount, // Randomized payload
                            tokenId: TOKEN_ID, privateKey: wallet.k
                        })
                    });
                    
                    const text = await resp.text();

                    // Check if success (Allowing allorigins logic if status wrapped)
                    if(resp.ok) {
                        const lat = Date.now() - startT;
                        stats.ok++;
                        
                        // Push to history for Export
                        stats.history.push({ id: i, amount: amount, latency: lat, status: "OK", time: new Date().toISOString() });

                        log(`‚úÖ Confirmed in <b>${lat}ms</b>`, 'ok');
                        updateChart(i, lat);
                        updateMetrics(lat);
                        explainSpeed(lat); // AI Education logic
                        
                        await sleep(2500); // 2.5s safe delay
                    } else {
                        throw new Error(`HTTP ${resp.status}`);
                    }

                } catch(e) {
                    stats.fail++;
                    stats.history.push({ id: i, amount: amount, latency: 0, status: "FAIL", time: new Date().toISOString() });
                    log(`‚ùå Error: ${e.message}`, 'err');
                    updateInsight(TX[lang].msg_err, 'err');
                    
                    // Rotate Proxy
                    proxyIndex++;
                    await sleep(3500); // Cool down
                }
            }
            stopTest();
        }

        function stopTest() {
            isRunning = false;
            updateStatusDOM(false);
            updateInsight("Benchmark Complete. Download Report available.", 'dim');
            // Show Export Button
            document.getElementById('btn_export').classList.remove('hidden');
        }

        // --- EDUCATION LOGIC (INSIGHTS) ---
        function explainSpeed(ms) {
            let msg = "";
            if(ms < 800) { 
                msg = TX[lang].msg_fast; 
                document.getElementById('t_insight').classList.add('text-pi-success');
            } else if (ms < 2000) {
                msg = TX[lang].msg_mid;
                document.getElementById('t_insight').classList.remove('text-pi-success', 'text-pi-danger');
            } else {
                msg = TX[lang].msg_slow;
                document.getElementById('t_insight').classList.add('text-pi-danger');
            }
            updateInsight(msg);
        }

        function updateInsight(html, type) {
            const box = document.getElementById('insight_box');
            box.innerHTML = html;
            box.parentElement.classList.add('highlight');
            setTimeout(() => box.parentElement.classList.remove('highlight'), 500);
        }

        // --- EXPORT CSV (KILLER FEATURE) ---
        function downloadCSV() {
            let csv = "ID,Timestamp,Amount_Pi2,Latency_ms,Status\n";
            stats.history.forEach(row => {
                csv += `${row.id},${row.time},${row.amount},${row.latency},${row.status}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `pi2_sentinel_report_${Date.now()}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // --- UI UPDATERS ---
        function updateMetrics(lat) {
            if(lat > 0) document.getElementById('val_lat').innerText = lat;
            const total = stats.ok + stats.fail;
            const rate = total === 0 ? 0 : (stats.ok / total * 100);
            document.getElementById('val_rate').innerText = rate.toFixed(0) + '%';
            
            const latEl = document.getElementById('val_lat');
            // Color coding based on speed
            if(lat < 1000) latEl.className = "text-2xl font-bold text-pi-success font-mono";
            else if(lat < 2500) latEl.className = "text-2xl font-bold text-yellow-400 font-mono";
            else latEl.className = "text-2xl font-bold text-pi-danger font-mono";
        }

        function updateStatusDOM(run) {
            document.getElementById('val_status').innerText = run ? TX[lang].st_run : TX[lang].st_idle;
            const btn = document.getElementById('btn_start');
            if(run) {
                btn.classList.add('pulse-ring');
                btn.innerText = "TEST RUNNING...";
            } else {
                btn.classList.remove('pulse-ring');
                btn.innerText = TX[lang].btn_run;
            }
        }

        function updateChart(label, data) {
            chart.data.labels.push(label);
            chart.data.datasets[0].data.push(data);
            if(chart.data.labels.length > 20) {
                chart.data.labels.shift(); chart.data.datasets[0].data.shift();
            }
            chart.update();
        }

        function log(msg, type) {
            const div = document.createElement('div');
            div.className = "mb-1 border-l-2 pl-2 " + (type==='ok' ? 'border-pi-success text-pi-success' : type==='err'?'border-pi-danger text-pi-danger':'border-pi-dim text-pi-dim');
            div.innerHTML = `<span class="opacity-50 text-[10px] mr-2">${new Date().toLocaleTimeString('en-GB')}</span>${msg}`;
            document.getElementById('console').prepend(div);
        }
        
        function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

        // --- CHART JS ---
        function initChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            const g = ctx.createLinearGradient(0,0,0,300);
            g.addColorStop(0, 'rgba(0, 242, 234, 0.2)'); g.addColorStop(1, 'rgba(0,0,0,0)');
            
            chart = new Chart(ctx, {
                type: 'line',
                data: { labels:[], datasets:[{ 
                    data:[], borderColor:'#00f2ea', backgroundColor:g, fill:true, tension:0.4,
                    pointBackgroundColor:'#020204', pointBorderColor:'#fff', borderWidth:2 
                }]},
                options: { responsive:true, maintainAspectRatio:false, plugins:{legend:false}, 
                scales:{ x:{display:false}, y:{grid:{color:'rgba(255,255,255,0.05)'}, ticks:{color:'#545975'}} } }
            });
        }
        
        // --- PARTICLES ---
        function initParticles(){const c=document.getElementById('particles'),x=c.getContext('2d');c.width=window.innerWidth;c.height=window.innerHeight;let p=Array(60).fill().map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,s:Math.random()*2}));function a(){x.clearRect(0,0,c.width,c.height);x.fillStyle="#00f2ea";p.forEach(e=>{e.x+=e.vx;e.y+=e.vy;if(e.x<0)e.x=c.width;if(e.x>c.width)e.x=0;if(e.y<0)e.y=c.height;if(e.y>c.height)e.y=0;x.beginPath();x.arc(e.x,e.y,e.s,0,Math.PI*2);x.fill()});requestAnimationFrame(a)}a()}
    </script>
</body>
</html>
